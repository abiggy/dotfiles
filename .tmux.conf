# --- General Settings ---
# Use Ctrl-a as prefix key (Matches both)
unbind C-b
set-option -g prefix C-a
bind-key C-a send-prefix

# Start windows and panes at 1, not 0
set -g base-index 1
setw -g pane-base-index 1

# Modern Mouse Support (Replaces 'mode-mouse')
# Allows you to click panes to select them and scroll with mouse wheel
set -g mouse on

# Set terminal to handle colors properly
# FB suggested xterm-256color, which is usually safe on OnDemand
set -g default-terminal "xterm-256color"

# History
set -g history-limit 10000

# --- Key Bindings ---

# Reload config file (Press Ctrl-a + r)
bind r source-file ~/.tmux.conf \; display "Config Reloaded!"

# Split Windows (Preserving current directory)
# Using | and - is more intuitive than v/s
bind | split-window -h -c "#{pane_current_path}"
bind - split-window -v -c "#{pane_current_path}"
# Also keeping your 'v' and 's' preference just in case
bind v split-window -h -c "#{pane_current_path}"
bind s split-window -v -c "#{pane_current_path}"

# Vim-style Pane Navigation (hjkl)
bind h select-pane -L
bind j select-pane -D
bind k select-pane -U
bind l select-pane -R

# Pane Resizing (Your custom keys)
bind < resize-pane -L 2
bind > resize-pane -R 2
# Note: '-' was used for split above, so we use Shift + and - for resize
bind -r H resize-pane -L 5
bind -r J resize-pane -D 5
bind -r K resize-pane -U 5
bind -r L resize-pane -R 5

# Window Navigation
bind C-n next-window
bind C-p previous-window
bind -n S-Left  previous-window
bind -n S-Right next-window

# Facebook Suggested Layouts (Useful for coding)
# Creates one large main window and stacks the rest on the side
bind-key + select-layout main-horizontal
bind-key = select-layout main-vertical
set-window-option -g other-pane-height 15
set-window-option -g other-pane-width 40

# --- Copy Mode (Linux Compatible) ---
setw -g mode-keys vi
bind -T copy-mode-vi v send -X begin-selection
# Removed 'pbcopy' (Mac only). On Linux OnDemand,
# just highlight text with your mouse (holding Shift if needed) to copy to system clipboard.
bind -T copy-mode-vi y send -X copy-selection-and-cancel

# --- Colors (Thayer Vimbrant - Converted to Modern Syntax) ---
# Legacy syntax (-fg, -bg, -attr) is deprecated. This is the new 'style' format.

# Status Bar
set -g status-style bg=colour235,fg=white

# Window Title (Inactive)
setw -g window-status-style fg=colour244,bg=default

# Window Title (Active)
setw -g window-status-current-style fg=colour166,bg=default,bright

# Pane Borders
set -g pane-border-style fg=colour235,bg=black
set -g pane-active-border-style fg=green,bg=black

# Message Text
set -g message-style bg=colour235,fg=colour166

# Pane Number Display
set -g display-panes-active-colour colour33
set -g display-panes-colour colour166

# Clock
setw -g clock-mode-colour colour64

# Activity Monitoring
setw -g monitor-activity on
set -g visual-activity on
